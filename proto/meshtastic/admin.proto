syntax = "proto3";

package meshtastic;

option java_package = "com.geeksville.mesh";
option java_outer_classname = "AdminProtos";

import "meshtastic/config.proto";
import "meshtastic/module_config.proto";
import "meshtastic/channel.proto";

message AdminMessage {
    // Session passkey for admin operations - required for state-changing commands
    // The node generates this key and sends it with any get_x_response packets.
    // The client MUST include the same key with any set_x commands.
    bytes session_passkey = 101;

    oneof payload_variant {
        // Get commands
        uint32 get_channel_request = 1;
        Channel get_channel_response = 2;
        uint32 get_owner_request = 3;
        // User get_owner_response = 4;
        uint32 get_config_request = 5;
        Config get_config_response = 6;
        uint32 get_module_config_request = 7;
        ModuleConfig get_module_config_response = 8;

        // Set commands
        Channel set_channel = 32;
        // User set_owner = 33;
        Config set_config = 34;
        ModuleConfig set_module_config = 35;

        // Actions
        int32 reboot_seconds = 95;
        int32 shutdown_seconds = 96;
        int32 factory_reset = 97;
        int32 nodedb_reset = 98;
    }
}
