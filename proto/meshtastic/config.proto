syntax = "proto3";

package meshtastic;

option java_package = "com.geeksville.mesh";
option java_outer_classname = "ConfigProtos";

message Config {
    message DeviceConfig {
        uint32 role = 1;
        bool serial_enabled = 2;
        bool debug_log_enabled = 3;
        uint32 button_gpio = 4;
        uint32 buzzer_gpio = 5;
        uint32 rebroadcast_mode = 6;
        uint32 node_info_broadcast_secs = 7;
        bool double_tap_as_button_press = 8;
        bool is_managed = 9;
        bool disable_triple_click = 10;
        string tzdef = 11;
        bool led_heartbeat_disabled = 12;
    }

    message PositionConfig {
        uint32 position_broadcast_secs = 1;
        bool position_broadcast_smart_enabled = 2;
        bool fixed_position = 3;
        bool gps_enabled = 4;
        uint32 gps_update_interval = 5;
        uint32 gps_attempt_time = 6;
        uint32 position_flags = 7;
        uint32 rx_gpio = 8;
        uint32 tx_gpio = 9;
        uint32 broadcast_smart_minimum_distance = 10;
        uint32 broadcast_smart_minimum_interval_secs = 11;
        int32 gps_en_gpio = 12;
        uint32 gps_mode = 13;
    }

    message PowerConfig {
        bool is_power_saving = 1;
        uint32 on_battery_shutdown_after_secs = 2;
        float adc_multiplier_override = 3;
        uint32 wait_bluetooth_secs = 4;
        uint32 sds_secs = 6;
        uint32 ls_secs = 7;
        uint32 min_wake_secs = 8;
        uint32 device_battery_ina_address = 9;
        bool powermon_enables = 10;
    }

    message NetworkConfig {
        bool wifi_enabled = 1;
        string wifi_ssid = 3;
        string wifi_psk = 4;
        string ntp_server = 5;
        bool eth_enabled = 6;
        uint32 address_mode = 7;
        uint32 ipv4_config = 8;
        string rsyslog_server = 9;
    }

    message DisplayConfig {
        uint32 screen_on_secs = 1;
        uint32 gps_format = 2;
        uint32 auto_screen_carousel_secs = 3;
        bool compass_north_top = 4;
        bool flip_screen = 5;
        uint32 units = 6;
        uint32 oled = 7;
        uint32 displaymode = 8;
        bool heading_bold = 9;
        bool wake_on_tap_or_motion = 10;
        uint32 compass_orientation = 11;
    }

    message LoRaConfig {
        bool use_preset = 1;
        uint32 modem_preset = 2;
        uint32 bandwidth = 3;
        uint32 spread_factor = 4;
        uint32 coding_rate = 5;
        float frequency_offset = 6;
        uint32 region = 7;
        uint32 hop_limit = 8;
        bool tx_enabled = 9;
        int32 tx_power = 10;
        uint32 channel_num = 11;
        bool override_duty_cycle = 12;
        bool sx126x_rx_boosted_gain = 13;
        float override_frequency = 14;
        bool pa_fan_disabled = 15;
        repeated uint32 ignore_incoming = 103;
        bool ignore_mqtt = 104;
    }

    message BluetoothConfig {
        bool enabled = 1;
        uint32 mode = 2;
        uint32 fixed_pin = 3;
    }

    oneof payload_variant {
        DeviceConfig device = 1;
        PositionConfig position = 2;
        PowerConfig power = 3;
        NetworkConfig network = 4;
        DisplayConfig display = 5;
        LoRaConfig lora = 6;
        BluetoothConfig bluetooth = 7;
    }
}
